<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Gallery</title>
  <style>
    /* CSS样式保持不变，为了节省篇幅，这里引用原来的样式核心，但隐藏了上传/删除相关的按钮样式 */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap');
    
    :root {
      --bg: #FAF8F5; --surface: #FFFFFF; --text: #2C2C2C; --text-secondary: #777; --text-muted: #AAA;
      --border: #E8E4DF; --accent: #2C2C2C; --overlay: rgba(0,0,0,0.88);
      --col-gap: 40px; --row-gap: 40px; --col-width: 320px;
    }
    [data-theme="dark"] {
      --bg: #0A0A0A; --surface: #161616; --text: #F0F0F0; --text-secondary: #BBB;
      --text-muted: #666; --border: #333; --accent: #F0F0F0; --overlay: rgba(0,0,0,0.92);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; overflow-x: hidden; }
    
    /* 导航栏 */
    .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; transition: background 0.3s; padding: 0 24px; height: 52px; display: flex; align-items: center; justify-content: space-between; }
    .nav.scrolled { background: rgba(250,248,245,0.88); backdrop-filter: blur(12px); }
    [data-theme="dark"] .nav.scrolled { background: rgba(10,10,10,0.85); }
    .nav-logo { font-family: 'Space Grotesk', sans-serif; font-weight: 700; color: var(--text); text-decoration: none; font-size: 17px; }
    .nav-right { display: flex; gap: 16px; align-items: center; }
    .theme-toggle { cursor: pointer; background: transparent; border: 1px solid var(--border); border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; color: var(--text); }

    /* 浮动控制栏 */
    .floating-controls { position: fixed; top: 52px; left: 0; right: 0; z-index: 99; padding: 8px 24px; display: flex; gap: 12px; opacity: 0; transform: translateY(-8px); transition: 0.3s; pointer-events: none; }
    .floating-controls.visible { opacity: 1; transform: translateY(0); pointer-events: auto; background: var(--bg); }
    .search-input { padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: rgba(0,0,0,0.04); color: var(--text); outline: none; }
    [data-theme="dark"] .search-input { background: rgba(255,255,255,0.08); }
    
    /* 标签 */
    .filter-tags-wrap { display: flex; gap: 6px; flex-wrap: wrap; }
    .filter-tag { padding: 5px 12px; border-radius: 16px; font-size: 11px; cursor: pointer; border: 1px solid var(--border); background: transparent; color: var(--text-secondary); }
    .filter-tag.active { background: var(--accent); color: var(--bg); }

    /* 瀑布流 */
    .masonry-container { width: 100%; padding: 80px 0 0; min-height: 100vh; }
    .masonry { column-width: var(--col-width); column-gap: var(--col-gap); padding: 0 20px; }
    .grid-item { break-inside: avoid; margin-bottom: var(--row-gap); position: relative; cursor: zoom-in; transition: transform 0.3s; }
    .grid-item:hover { transform: scale(1.02); z-index: 2; }
    .grid-item img { width: 100%; display: block; border-radius: 4px; }
    .grid-item .overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px 10px 10px; background: linear-gradient(transparent, rgba(0,0,0,0.7)); opacity: 0; transition: 0.2s; color: white; pointer-events: none; }
    .grid-item:hover .overlay { opacity: 1; }
    
    /* 灯箱 */
    .lightbox { position: fixed; inset: 0; background: var(--overlay); z-index: 1000; display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s; }
    .lightbox.show { display: flex; opacity: 1; }
    .lightbox img { max-width: 90vw; max-height: 85vh; box-shadow: 0 20px 80px rgba(0,0,0,0.5); }
    .lightbox-close { position: absolute; top: 20px; right: 20px; color: white; background: transparent; border: none; font-size: 30px; cursor: pointer; }
    .lightbox-info { position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; color: white; pointer-events: none; }
    .lightbox-nav { position: absolute; top: 50%; transform: translateY(-50%); font-size: 40px; color: white; background: transparent; border: none; cursor: pointer; padding: 20px; }
    .lightbox-nav.prev { left: 10px; }
    .lightbox-nav.next { right: 10px; }

    @media(max-width: 600px) { :root { --col-width: 100%; } .nav { padding: 0 16px; } }
  </style>
</head>
<body>

  <!-- 导航 -->
  <nav class="nav" id="mainNav">
    <a class="nav-logo" href="#">GALLERY</a>
    <div class="nav-right">
      <button class="theme-toggle" onclick="toggleTheme()">◑</button>
    </div>
  </nav>

  <!-- 搜索与筛选 -->
  <div class="floating-controls" id="floatingControls">
    <input type="text" class="search-input" id="searchInput" placeholder="Search..." oninput="handleSearch()">
    <div class="filter-tags-wrap" id="filterSection"></div>
  </div>

  <!-- 瀑布流网格 -->
  <div class="masonry-container">
    <div class="masonry" id="masonryGrid"></div>
  </div>

  <!-- 灯箱查看器 -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
    <button class="lightbox-close" onclick="closeLightbox()">×</button>
    <button class="lightbox-nav prev" onclick="navLightbox(-1, event)">‹</button>
    <button class="lightbox-nav next" onclick="navLightbox(1, event)">›</button>
    <img id="lbImage" src="">
    <div class="lightbox-info">
      <h3 id="lbTitle" style="font-weight:600; margin-bottom:4px;"></h3>
      <p id="lbMeta" style="opacity:0.7; font-size:13px;"></p>
    </div>
  </div>

<script>
  // ==========================================
  // 1. 数据配置区 (每次更新图片修改这里)
  // ==========================================
  const worksData = [
    
    {
      title: "REANIMAL第二次",
      category: "draw",
      year: "2026",
      src: "images/demo1.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    // 第二次更新（2-10）
    {
      title: "翻工",
      category: "draw",
      year: "2026",
      src: "images/2.jpg",  // 图片必须放在 images 文件夹
      desc: ""
    },
    {
      title: "HUGEWOMAN",
      category: "draw",
      year: "2026",
      src: "images/3.jpg",  // 图片必须放在 images 文件夹
      desc: ""
    },
    {
      title: "REANIMAL第一次",
      category: "draw",
      year: "2026",
      src: "images/4.jpg",  // 图片必须放在 images 文件夹
      desc: "一直在躲！"
    },
    {
      title: "二月十四",
      category: "draw",
      year: "2026",
      src: "images/5.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    {
      title: "拉伸",
      category: "draw",
      year: "2026",
      src: "images/6.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    {
      title: "热带",
      category: "draw",
      year: "2026",
      src: "images/7.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    {
      title: "婧物",
      category: "draw",
      year: "2026",
      src: "images/8.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    {
      title: "被打到",
      category: "四格漫画",
      year: "2025",
      src: "images/9.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
    {
      title: "天才",
      category: "四格漫画",
      year: "2026",
      src: "images/10.jpg",  // 图片必须放在 images 文件夹
      desc: " "
    },
   {
      title: "ZIRVANA",
      category: "draw",
      year: "2026",
      src: "images/2a4bd75da990d7871524bfb54fc07954.jpg",  // 图片必须放在 images 文件夹
      desc: "游泳的时候像个卤蛋"
    },
    
    
    // 复制上面的 { ... }, 来添加新图片
  ];

  // ==========================================
  // 2. 逻辑区 (一般不需要动)
  // ==========================================
  let currentFilter = 'all';
  let currentSearch = '';
  let lightboxIndex = 0;
  let filteredWorks = [...worksData];

  // 初始化
  function init() {
    initTheme();
    renderFilters();
    renderGrid();
  }

  // 渲染筛选标签
  function renderFilters() {
    const cats = new Set(worksData.map(w => w.category));
    let html = `<button class="filter-tag active" onclick="filterBy('all')">All</button>`;
    cats.forEach(c => {
      html += `<button class="filter-tag" onclick="filterBy('${c}')">${c}</button>`;
    });
    document.getElementById('filterSection').innerHTML = html;
  }

  // 渲染网格
  function renderGrid() {
    const grid = document.getElementById('masonryGrid');
    
    // 过滤与搜索逻辑
    filteredWorks = worksData.filter(w => {
      const matchCat = currentFilter === 'all' || w.category === currentFilter;
      const q = currentSearch.toLowerCase();
      const matchSearch = !q || (w.title+w.category+w.desc+w.year).toLowerCase().includes(q);
      return matchCat && matchSearch;
    });

    if(filteredWorks.length === 0) {
      grid.innerHTML = '<div style="text-align:center; padding:40px; color:#999;">No works found.</div>';
      return;
    }

    grid.innerHTML = filteredWorks.map((w, i) => `
      <div class="grid-item" onclick="openLightbox(${i})">
        <img src="${w.src}" loading="lazy" alt="${w.title}">
        <div class="overlay">
          <div style="font-weight:600">${w.title}</div>
          <div style="font-size:12px; opacity:0.8">${w.category} · ${w.year}</div>
        </div>
      </div>
    `).join('');
  }

  // 交互功能
  window.filterBy = (cat) => {
    currentFilter = cat;
    document.querySelectorAll('.filter-tag').forEach(b => 
      b.classList.toggle('active', b.innerText === cat || (cat==='all' && b.innerText==='All')));
    renderGrid();
  };

  window.handleSearch = () => {
    currentSearch = document.getElementById('searchInput').value.trim();
    renderGrid();
  };

  // 灯箱逻辑
  window.openLightbox = (idx) => {
    lightboxIndex = idx;
    updateLightbox();
    document.getElementById('lightbox').classList.add('show');
  };
  
  function updateLightbox() {
    const w = filteredWorks[lightboxIndex];
    document.getElementById('lbImage').src = w.src;
    document.getElementById('lbTitle').innerText = w.title;
    document.getElementById('lbMeta').innerText = `${w.category} | ${w.year} | ${w.desc || ''}`;
  }
  
  window.closeLightbox = (e) => {
    if(e && e.target.tagName === 'IMG') return; 
    document.getElementById('lightbox').classList.remove('show');
  };
  
  window.navLightbox = (dir, e) => {
    if(e) e.stopPropagation();
    lightboxIndex = (lightboxIndex + dir + filteredWorks.length) % filteredWorks.length;
    updateLightbox();
  };

  // 主题与滚动
  function initTheme() {
    if(localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
  }
  window.toggleTheme = () => {
    const isDark = document.body.hasAttribute('data-theme');
    isDark ? document.body.removeAttribute('data-theme') : document.body.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', isDark ? 'light' : 'dark');
  };

  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    document.getElementById('mainNav').classList.toggle('scrolled', scrollY > 50);
    document.getElementById('floatingControls').classList.toggle('visible', scrollY > 50);
  });

  init();
</script>
</body>
</html>
